<!DOCTYPE html>

<html>

<head>
  <title>March Madness Teams</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/custom.css') }}">


  <script>
    function myfun() {
      $(document).ready(function () {

        $("#edit-button").click(
          function () {
            var data = $('#edit-button').data('source')
            $("#team-id-input").val(data);
          });
      });
    }
  </script>

</head>

<body>

  <div class="topnav">
    <a href="/">Home</a>
    <a href="/teams">Teams</a>
    <a href="/dan">Matches</a>
    <a href="/gene">Brackets</a>
    <a href="/predictions">Predictions</a>
  </div>

  <main role="main" class="container extra-bottom">
    <h1 class="mt-5">NCAA Teams</h1>
  </main>

  <div class="container">

    <!-- Button trigger modal -->
    <div style="text-align: right;">
      <button type="button" class="btn btn-outline-info btn-sm" data-bs-toggle="modal"
        data-bs-target="#team-create-modal" data-source="New Team">Add team</button>
    </div>


    <div class="modal fade" id="team-create-modal" tabindex="-1" aria-labelledby="Label" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="Label">Add a team</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          <div class="modal-body">
            <iframe name="dummyframe" id="dummyframe" style="display: none;"></iframe>
            <form action="/teams/create" method="post" target="dummyframe">
              <p>Team Name:</p>
              <p><input type="text" name="team-name" /></p>
              <p>Conference:</p>
              <p><input type="text" name="conference" /></p>
              <p>Games Played:</p>
              <p><input type="number" name="games-played" /></p>
              <p>Wins:</p>
              <p><input type="number" name="wins" /></p>
              <p><input type="submit" value="submit" /></p>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="team-update-modal" tabindex="-1" aria-labelledby="Label" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="Label">Edit team</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          <div class="modal-body">
            <iframe name="dummyframe" id="dummyframe" style="display: none;"></iframe>
            <form action="/teams/edit" method="post" target="dummyframe">
              <p>Team ID:</p>
              <p><input type="number" name="team-id" id="team-id-input" /></p>
              <p>Team Name:</p>
              <p><input type="text" name="team-name" /></p>
              <p>Conference:</p>
              <p><input type="text" name="conference" /></p>
              <p>Games Played:</p>
              <p><input type="number" name="games-played" /></p>
              <p>Wins:</p>
              <p><input type="number" name="wins" /></p>
              <p><input type="submit" value="submit" /></p>
            </form>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="container table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th class="team-id">#</th>
          <th class="team-name">Team Name</th>
          <th class="conference">Conference</th>
          <th class="games-played">Games Played</th>
          <th class="wins">Wins</th>
          <th class="update">Edit</th>
          <th class="update">Remove</th>
        </tr>
      </thead>

      <tbody>
        {% for team in teams %}
        <tr>
          <td>{{team.id}}</td>
          <td>{{team.TeamName}}</td>
          <td>{{team.Conference}}</td>
          <td>{{team.GamesPlayed}}</td>
          <td>{{team.Wins}}</td>
          <td><button type="button" class="btn btn-outline-info btn-sm" id="edit-button" data-bs-toggle="modal"
              data-bs-target="#team-update-modal" data-source="{{team.id}}" data-content="{{team.TeamName}}"><i
                class="fa fa-pen fa-1" aria-hidden="true" onclick="myfun()"></i></button></td>

          <td>
            <iframe name="dummyframe" id="dummyframe" style="display: none;"></iframe>
            <form action="/delete/{{team.id}}" method="post" target="dummyframe">
              <button class="btn btn-outline-secondary btn-sm remove" data-source="{{team.id}}" type="submit">
                <i class="fa fa-trash fa-1" aria-hidden="true"></i>
              </button>
            </form>
          </td>
        </tr>
        {% endfor %}

      </tbody>
    </table>
  </div>



</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>


</html>